#!/usr/bin/env python3
from pathlib import Path
import os
import shutil
import sys
import re
import shlex
import subprocess

def p(cmd, echo=True):
    args = shlex.split(cmd)

    try:
        res = subprocess.check_output(args, text=True)
    except subprocess.CalledProcessError as e:
        eprint(f"\nFAILED:\n\n  {cmd}")
        exit(-1)

    if echo:
        print(res)

    return res

def rm(path):
    shutil.rmtree(path, ignore_errors=True)

def mkdir(path):
    Path(path).mkdir(parents=True, exist_ok=True)

def cd(path):
    os.chdir(path)

def eprint(*args, **kwargs):
    print(*args, file=sys.stderr, **kwargs)

_, script, *args = sys.argv
exit = sys.exit

exec(open(script).read())
