#!/usr/bin/env python3
import sys
import re
import shlex
import subprocess

def p(cmd):
    args = shlex.split(cmd)
    res = subprocess.check_output(args)
    print(res)
    return res

if len(sys.argv) > 1:
    message = sys.argv[1]
else:
    message = p('git show -s --format=%B HEAD')

pr = p(f'git-hub pull new -m "{message}"')
pr = re.search(r'\[(\d+)\]', pr)[1]

p(f'git-hub pull comment -m "bors r+\nðŸ¤–" {pr}')
